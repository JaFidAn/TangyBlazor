@page "/learnBlazor/demoproducts"

<h3 class="text-primary">DemoProducts</h3>
<div class="border p-2 mt-2" style="background-color:azure">
	<div class="row">
		@foreach(var product in Products)
		{
			<div class="bg-light border m-1 col-5">
				<h4 class="text-secondary">Product - @product.Id</h4>
				Name - @product.Name <br>
				Show Properties : <input type="checkbox" @bind-value="@product.IsActive" checked=@(product.IsActive?"checked":null) /> 
				@if(product.IsActive)
				{
				
					@foreach(var prodProp in product.ProductProperties)
					{
						<p>@prodProp.Key - @prodProp.Value</p>
					}
				}
				<br />
				<input type="button" class="btn btn-danger" style="width:100px" value="Delete" />
				<input type="button" class="btn btn-success" style="width:100px" value="Edit" />
			</div>
		}
	</div>
</div>

@code {
	DemoProduct Product = new DemoProduct()
		{
			Id = 1,
			Name = "Rose Candle",
			Price = 100.55,
			IsActive = true,
			ProductProperties = new List<DemoProductProp>()
			{
				new DemoProductProp {Id = 1, Key = "Color", Value = "Black"},
				new DemoProductProp {Id = 2, Key = "Flavor", Value = "Rose Jasmine"},
				new DemoProductProp {Id = 3, Key = "Size", Value = "20oz"}
			}
		};

	List<DemoProduct> Products = new List<DemoProduct>();

	protected override void OnInitialized()
	{
		Products.Add(new()
			{
				Id = 1,
				Name = "Midnight Blaze",
				Price = 200.99,
				IsActive = false,
				ProductProperties = new()
				{
				new DemoProductProp { Id = 1, Key = "Flavor", Value = "Rose"},
					 new DemoProductProp { Id = 2, Key = "Size", Value = "20oz"},
					new DemoProductProp { Id = 3, Key = "Color", Value="Purple" }
				}
			});

		Products.Add(new()
			{
				Id = 2,
				Name = "Blossom Lily",
				Price = 100.55,
				IsActive = true,
				ProductProperties = new()
			{
				new DemoProductProp { Id = 1, Key = "Flavor", Value = "Lily" },
				new DemoProductProp { Id = 2, Key = "Size", Value = "18oz" },
				new DemoProductProp {Id = 3,Key = "Color",Value = "White"}
			}
			});
	}
}
